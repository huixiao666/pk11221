<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sing-Box 核心防御矩阵 - 智能风险动态监测可视化数据大屏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #1a73e8;
            --secondary-color: #34a853;
            --warning-color: #fbbc05;
            --danger-color: #ea4335;
            --dark-bg: #0f1419;
            --card-bg: #1e2328;
            --text-color: #e8eaed;
            --border-color: #2d343a;
            --accent-color: #8ab4f8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text-color);
            padding: 20px;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(26, 115, 232, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(52, 168, 83, 0.1) 0%, transparent 20%);
        }
        
        .dashboard-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }
        
        .dashboard-title {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(26, 115, 232, 0.3);
            letter-spacing: 1px;
        }
        
        .dashboard-subtitle {
            font-size: 1.2rem;
            color: #9aa0a6;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            border-left: 5px solid var(--primary-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .stat-card.danger {
            border-left-color: var(--danger-color);
        }
        
        .stat-card.warning {
            border-left-color: var(--warning-color);
        }
        
        .stat-card.success {
            border-left-color: var(--secondary-color);
        }
        
        .stat-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            color: var(--accent-color);
        }
        
        .stat-title i {
            margin-right: 10px;
            font-size: 1.3rem;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }
        
        .stat-progress {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .stat-progress-bar {
            height: 100%;
            border-radius: 3px;
            transition: width 1s ease;
        }
        
        .stat-description {
            color: #9aa0a6;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .chart-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }
        
        .chart-card:hover {
            transform: translateY(-5px);
        }
        
        .chart-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            color: var(--accent-color);
        }
        
        .chart-title i {
            margin-right: 10px;
        }
        
        .chart-wrapper {
            height: 250px;
            position: relative;
        }
        
        .details-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .details-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }
        
        .details-card:hover {
            transform: translateY(-5px);
        }
        
        .details-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            color: var(--accent-color);
        }
        
        .details-title i {
            margin-right: 10px;
        }
        
        .details-list {
            list-style-type: none;
        }
        
        .details-list li {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s ease;
        }
        
        .details-list li:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .details-list li:last-child {
            border-bottom: none;
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-safe {
            background-color: rgba(52, 168, 83, 0.2);
            color: var(--secondary-color);
            border: 1px solid rgba(52, 168, 83, 0.5);
        }
        
        .status-warning {
            background-color: rgba(251, 188, 5, 0.2);
            color: var(--warning-color);
            border: 1px solid rgba(251, 188, 5, 0.5);
        }
        
        .status-danger {
            background-color: rgba(234, 67, 53, 0.2);
            color: var(--danger-color);
            border: 1px solid rgba(234, 67, 53, 0.5);
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #9aa0a6;
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
        }
        
        .real-time-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { 
                opacity: 1; 
                box-shadow: 0 0 0 0 rgba(52, 168, 83, 0.7);
            }
            70% { 
                opacity: 0.7;
                box-shadow: 0 0 0 10px rgba(52, 168, 83, 0);
            }
            100% { 
                opacity: 1;
                box-shadow: 0 0 0 0 rgba(52, 168, 83, 0);
            }
        }
        
        .node-status {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .node-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .node-active {
            background-color: var(--secondary-color);
            box-shadow: 0 0 5px var(--secondary-color);
        }
        
        .node-inactive {
            background-color: #5f6368;
        }
        
        .risk-meter {
            height: 10px;
            background: linear-gradient(90deg, var(--secondary-color), var(--warning-color), var(--danger-color));
            border-radius: 5px;
            margin: 10px 0;
            position: relative;
        }
        
        .risk-indicator {
            position: absolute;
            top: -5px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
        }
        
        .data-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }
        
        .flow-step {
            text-align: center;
            flex: 1;
            position: relative;
        }
        
        .flow-step:not(:last-child)::after {
            content: '→';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-color);
        }
        
        .flow-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            color: var(--accent-color);
        }
        
        .security-shield {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(26, 115, 232, 0.2);
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .threat-level {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        
        .threat-bar {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin: 0 10px;
            overflow: hidden;
        }
        
        .threat-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }
        
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .metric {
            text-align: center;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }
        
        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .metric-label {
            font-size: 0.8rem;
            color: #9aa0a6;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .comparison-table th, .comparison-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .comparison-table th {
            color: var(--accent-color);
            font-weight: normal;
        }
        
        .comparison-table tr:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .comparison-badge {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .badge-better {
            background: rgba(52, 168, 83, 0.2);
            color: var(--secondary-color);
        }
        
        .badge-worse {
            background: rgba(234, 67, 53, 0.2);
            color: var(--danger-color);
        }
        
        .dns-latency-monitor {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
        }
        
        .dns-latency-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .dns-latency-title {
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            color: var(--accent-color);
        }
        
        .dns-latency-title i {
            margin-right: 10px;
        }
        
        .dns-latency-controls {
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: var(--text-color);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .control-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .dns-latency-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }
        
        .latency-chart-container {
            height: 300px;
        }
        
        .latency-stats {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .latency-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }
        
        .latency-server {
            display: flex;
            align-items: center;
        }
        
        .latency-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .latency-value {
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .latency-trend {
            font-size: 0.8rem;
            margin-left: 5px;
        }
        
        .trend-up {
            color: var(--danger-color);
        }
        
        .trend-down {
            color: var(--secondary-color);
        }
        
        .latency-history {
            margin-top: 15px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="dashboard-header">
        <h1 class="dashboard-title">Sing-Box 核心防御矩阵</h1>
        <p class="dashboard-subtitle">智能风险动态监测可视化数据大屏 | 全面防护IP泄露、DNS污染、防火墙拦截、隐私安全威胁</p>
    </div>
    
    <div class="stats-container">
        <div class="stat-card success">
            <h3 class="stat-title"><i class="fas fa-shield-alt"></i> 整体安全评分</h3>
            <div class="stat-value">96.8/100</div>
            <div class="stat-progress">
                <div class="stat-progress-bar" style="width: 96.8%; background: var(--secondary-color);"></div>
            </div>
            <p class="stat-description">基于IP安全、DNS防护、规则集完整性和连接稳定性综合评估</p>
        </div>
        
        <div class="stat-card">
            <h3 class="stat-title"><i class="fas fa-network-wired"></i> IP安全状态</h3>
            <div class="stat-value">98.7%</div>
            <div class="stat-progress">
                <div class="stat-progress-bar" style="width: 98.7%; background: var(--secondary-color);"></div>
            </div>
            <p class="stat-description">TUN设备加密、伪装技术有效防止IP泄露、扫描和防火墙拦截</p>
        </div>
        
        <div class="stat-card">
            <h3 class="stat-title"><i class="fas fa-server"></i> DNS安全状态</h3>
            <div class="stat-value">99.2%</div>
            <div class="stat-progress">
                <div class="stat-progress-bar" style="width: 99.2%; background: var(--secondary-color);"></div>
            </div>
            <p class="stat-description">HTTPS加密查询、独立缓存和fakeip策略防止DNS泄露和污染</p>
        </div>
        
        <div class="stat-card">
            <h3 class="stat-title"><i class="fas fa-random"></i> 分流效率</h3>
            <div class="stat-value">94.5%</div>
            <div class="stat-progress">
                <div class="stat-progress-bar" style="width: 94.5%; background: var(--secondary-color);"></div>
            </div>
            <p class="stat-description">基于16个规则集的智能分流，准确识别国内外流量</p>
        </div>
    </div>
    
    <!-- 新增广告拦截统计卡片 -->
        <div class="stat-card ad-block-card">
            <h3 class="stat-title"><i class="fas fa-ban"></i> 广告拦截统计</h3>
            <div class="stat-value">92.3%</div>
            <div class="stat-progress">
                <div class="stat-progress-bar" style="width: 92.3%; background: #8e24aa;"></div>
            </div>
            <p class="stat-description">已拦截广告请求、追踪脚本和恶意弹窗，提升浏览体验</p>
            <div class="ad-block-metrics">
                <div class="metric">
                    <div class="metric-value" id="blocked-count">1,286</div>
                    <div class="metric-label">今日拦截数</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="saved-data">48MB</div>
                    <div class="metric-label">节省流量</div>
                </div>
            </div>
       </div>
            </div>
    
    
    <!-- DNS解析延迟监控 -->
    <div class="dns-latency-monitor">
        <div class="dns-latency-header">
            <h3 class="dns-latency-title"><i class="fas fa-tachometer-alt"></i> DNS解析延迟实时监控</h3>
            <div class="dns-latency-controls">
                <button class="control-btn" id="pause-resume-btn"><i class="fas fa-pause"></i> 暂停</button>
                <button class="control-btn" id="reset-btn"><i class="fas fa-redo"></i> 重置</button>
            </div>
        </div>
        <div class="dns-latency-content">
            <div class="latency-chart-container">
                <canvas id="dnsLatencyChart"></canvas>
            </div>
            <div class="latency-stats">
                <div class="latency-stat">
                    <div class="latency-server">
                        <div class="latency-dot" style="background-color: #1a73e8;"></div>
                        <span>Google DNS</span>
                    </div>
                    <div>
                        <span class="latency-value" id="google-latency">58ms</span>
                        <span class="latency-trend trend-down" id="google-trend"><i class="fas fa-arrow-down"></i></span>
                    </div>
                </div>
                <div class="latency-stat">
                    <div class="latency-server">
                        <div class="latency-dot" style="background-color: #34a853;"></div>
                        <span>Ali DNS</span>
                    </div>
                    <div>
                        <span class="latency-value" id="ali-latency">32ms</span>
                        <span class="latency-trend trend-down" id="ali-trend"><i class="fas fa-arrow-down"></i></span>
                    </div>
                </div>
                <div class="latency-stat">
                    <div class="latency-server">
                        <div class="latency-dot" style="background-color: #fbbc05;"></div>
                        <span>FakeIP</span>
                    </div>
                    <div>
                        <span class="latency-value" id="fakeip-latency">12ms</span>
                        <span class="latency-trend trend-up" id="fakeip-trend"><i class="fas fa-arrow-up"></i></span>
                    </div>
                </div>
                <div class="latency-history">
                    <div class="history-item">
                        <span>Google DNS: 查询 youtube.com</span>
                        <span>58ms</span>
                    </div>
                    <div class="history-item">
                        <span>Ali DNS: 查询 baidu.com</span>
                        <span>32ms</span>
                    </div>
                    <div class="history-item">
                        <span>FakeIP: 查询 netflix.com</span>
                        <span>12ms</span>
                    </div>
                    <div class="history-item">
                        <span>Google DNS: 查询 google.com</span>
                        <span>62ms</span>
                    </div>
                    <div class="history-item">
                        <span>Ali DNS: 查询 taobao.com</span>
                        <span>28ms</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="main-content">
        <div class="chart-container">
            <div class="chart-card">
                <h3 class="chart-title"><i class="fas fa-bolt"></i> 节点性能评分</h3>
                <div class="chart-wrapper">
                    <canvas id="nodePerformanceChart"></canvas>
                </div>
                <div class="performance-metrics">
                    <div class="metric">
                        <div class="metric-value">92%</div>
                        <div class="metric-label">稳定性</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">88%</div>
                        <div class="metric-label">速度</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">95%</div>
                        <div class="metric-label">可用性</div>
                    </div>
                </div>
            </div>
            
            <div class="chart-card">
                <h3 class="chart-title"><i class="fas fa-shield-virus"></i> 安全威胁分布</h3>
                <div class="chart-wrapper">
                    <canvas id="threatDistributionChart"></canvas>
                </div>
                <div class="threat-level">
                    <span>低风险</span>
                    <div class="threat-bar">
                        <div class="threat-fill" style="width: 15%; background: var(--secondary-color);"></div>
                    </div>
                    <span>高风险</span>
                </div>
            </div>
            
            <div class="chart-card">
                <h3 class="chart-title"><i class="fas fa-project-diagram"></i> 流量分布分析</h3>
                <div class="chart-wrapper">
                    <canvas id="trafficDistributionChart"></canvas>
                </div>
                <div class="data-flow">
                    <div class="flow-step">
                        <div class="flow-icon"><i class="fas fa-user"></i></div>
                        <div>用户请求</div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-icon"><i class="fas fa-filter"></i></div>
                        <div>规则匹配</div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-icon"><i class="fas fa-route"></i></div>
                        <div>智能分流</div>
                    </div>
                    <div class="flow-step">
                        <div class="flow-icon"><i class="fas fa-server"></i></div>
                        <div>目标服务器</div>
                    </div>
                </div>
            </div>
            
            <div class="chart-card">
                <h3 class="chart-title"><i class="fas fa-chart-line"></i> 延迟趋势分析</h3>
                <div class="chart-wrapper">
                    <canvas id="latencyTrendChart"></canvas>
                </div>
                <div class="threat-level">
                    <span>5分钟前</span>
                    <div class="threat-bar">
                        <div class="threat-fill" style="width: 100%; background: var(--primary-color);"></div>
                    </div>
                    <span>现在</span>
                </div>
            </div>
        </div>
        
        <div class="details-card">
            <h3 class="details-title"><i class="fas fa-list-alt"></i> 节点状态监控</h3>
            <div class="node-status">
                <div class="node-dot node-active"></div>
                <span>节点1-us1 (美国)</span>
                <span class="status-badge status-safe">在线</span>
            </div>
            <div class="node-status">
                <div class="node-dot node-active"></div>
                <span>节点2-us2 (美国)</span>
                <span class="status-badge status-safe">在线</span>
            </div>
            
            <h3 class="details-title" style="margin-top: 20px;"><i class="fas fa-exchange-alt"></i> 自动切换策略</h3>
            <div class="details-list">
                <li>
                    <span>URL测试间隔</span>
                    <span>1分钟</span>
                </li>
                <li>
                    <span>容错阈值</span>
                    <span>50ms</span>
                </li>
                <li>
                    <span>当前策略</span>
                    <span class="status-badge status-safe">负载均衡</span>
                </li>
            </div>
            
            <h3 class="details-title" style="margin-top: 20px;"><i class="fas fa-sync-alt"></i> 规则集更新状态</h3>
            <div class="details-list">
                <li>
                    <span>最后更新</span>
                    <span>2小时前</span>
                </li>
                <li>
                    <span>规则数量</span>
                    <span>16个</span>
                </li>
                <li>
                    <span>更新方式</span>
                    <span class="status-badge status-safe">自动</span>
                </li>
            </div>
        </div>
    </div>
    
    <div class="details-container">
        <div class="details-card">
            <h3 class="details-title"><i class="fas fa-exclamation-triangle"></i> 安全威胁监测</h3>
            <ul class="details-list">
                <li>
                    <span>IP泄露风险</span>
                    <span class="status-badge status-safe">极低</span>
                </li>
                <li>
                    <span>IP被扫描发现</span>
                    <span class="status-badge status-safe">已防护</span>
                </li>
                <li>
                    <span>IP被防火墙拦截</span>
                    <span class="status-badge status-safe">已规避</span>
                </li>
                <li>
                    <span>IP万人骑检测</span>
                    <span class="status-badge status-warning">中等</span>
                </li>
                <li>
                    <span>IP污染检测</span>
                    <span class="status-badge status-safe">已防护</span>
                </li>
                <li>
                    <span>IP隐私安全</span>
                    <span class="status-badge status-safe">高</span>
                </li>
                <li>
                    <span>IP地址乱跳</span>
                    <span class="status-badge status-safe">已优化</span>
                </li>
            </ul>
        </div>
        
        <div class="details-card">
            <h3 class="details-title"><i class="fas fa-cogs"></i> 系统配置状态</h3>
            <ul class="details-list">
                <li>
                    <span>DNS分流策略</span>
                    <span class="status-badge status-safe">运行中</span>
                </li>
                <li>
                    <span>路由规则集</span>
                    <span class="status-badge status-safe">16个规则集</span>
                </li>
                <li>
                    <span>出站连接</span>
                    <span class="status-badge status-safe">2个节点</span>
                </li>
                <li>
                    <span>TUN设备</span>
                    <span class="status-badge status-safe">已启用</span>
                </li>
                <li>
                    <span>HTTP代理</span>
                    <span class="status-badge status-safe">127.0.0.1:7890</span>
                </li>
                <li>
                    <span>Clash API</span>
                    <span class="status-badge status-safe">127.0.0.1:9090</span>
                </li>
                <li>
                    <span>缓存系统</span>
                    <span class="status-badge status-safe">已启用</span>
                </li>
            </ul>
        </div>
    </div>
    
    <div class="details-card" style="margin-top: 20px;">
        <h3 class="details-title"><i class="fas fa-balance-scale"></i> Sing-Box 与标准代理对比</h3>
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>功能特性</th>
                    <th>Sing-Box</th>
                    <th>标准代理</th>
                    <th>优势</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>DNS安全</td>
                    <td>HTTPS+独立缓存+FakeIP</td>
                    <td>普通DNS</td>
                    <td><span class="comparison-badge badge-better">+95%</span></td>
                </tr>
                <tr>
                    <td>IP泄露防护</td>
                    <td>TUN设备+流量加密</td>
                    <td>基础防护</td>
                    <td><span class="comparison-badge badge-better">+87%</span></td>
                </tr>
                <tr>
                    <td>规则集分流</td>
                    <td>16个远程规则集</td>
                    <td>简单域名列表</td>
                    <td><span class="comparison-badge badge-better">+73%</span></td>
                </tr>
                <tr>
                    <td>性能优化</td>
                    <td>URL测试+自动切换</td>
                    <td>手动切换</td>
                    <td><span class="comparison-badge badge-better">+68%</span></td>
                </tr>
                <tr>
                    <td>抗干扰能力</td>
                    <td>多协议+混淆</td>
                    <td>单一协议</td>
                    <td><span class="comparison-badge badge-better">+82%</span></td>
                </tr>
                <tr>
                    <td>广告拦截</td>
                    <td>智能规则拦截+实时更新</td>
                    <td>无或基础拦截</td>
                    <td><span class="comparison-badge badge-better">+92%</span></td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div class="footer">
        <p><span class="real-time-indicator"></span> 实时监控中 | 最后更新: <span id="current-time">加载中...</span> | Sing-Box版本: 1.8.0 | 配置文件版本: 3.0</p>
    </div>

    <script>
        // 更新时间
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleDateString('zh-CN') + ' ' + now.toLocaleTimeString('zh-CN');
        }
        
        updateTime();
        setInterval(updateTime, 1000);
        
        // DNS延迟图表数据
        let dnsData = {
            labels: [],
            datasets: [
                {
                    label: 'Google DNS',
                    data: [],
                    borderColor: 'rgba(26, 115, 232, 1)',
                    backgroundColor: 'rgba(26, 115, 232, 0.1)',
                    tension: 0.4,
                    fill: true
                },
                {
                    label: 'Ali DNS',
                    data: [],
                    borderColor: 'rgba(52, 168, 83, 1)',
                    backgroundColor: 'rgba(52, 168, 83, 0.1)',
                    tension: 0.4,
                    fill: true
                },
                {
                    label: 'FakeIP',
                    data: [],
                    borderColor: 'rgba(251, 188, 5, 1)',
                    backgroundColor: 'rgba(251, 188, 5, 0.1)',
                    tension: 0.4,
                    fill: true
                }
            ]
        };
        
        // DNS延迟图表
        const dnsCtx = document.getElementById('dnsLatencyChart').getContext('2d');
        const dnsLatencyChart = new Chart(dnsCtx, {
            type: 'line',
            data: dnsData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#9aa0a6'
                        },
                        title: {
                            display: true,
                            text: '延迟 (ms)',
                            color: '#9aa0a6'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#9aa0a6'
                        },
                        title: {
                            display: true,
                            text: '时间',
                            color: '#9aa0a6'
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: '#9aa0a6'
                        }
                    }
                }
            }
        });
        
        // 延迟趋势图表
        const trendCtx = document.getElementById('latencyTrendChart').getContext('2d');
        const latencyTrendChart = new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: ['-5m', '-4m', '-3m', '-2m', '-1m', '当前'],
                datasets: [
                    {
                        label: '平均延迟',
                        data: [45, 38, 42, 35, 32, 28],
                        borderColor: 'rgba(138, 180, 248, 1)',
                        backgroundColor: 'rgba(138, 180, 248, 0.1)',
                        tension: 0.4,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#9aa0a6'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#9aa0a6'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
        
        // 节点性能图表
        const nodeCtx = document.getElementById('nodePerformanceChart').getContext('2d');
        const nodePerformanceChart = new Chart(nodeCtx, {
            type: 'radar',
            data: {
                labels: ['速度', '稳定性', '延迟', '带宽', '可用性'],
                datasets: [
                    {
                        label: '节点1-us1',
                        data: [85, 90, 80, 75, 95],
                        backgroundColor: 'rgba(26, 115, 232, 0.2)',
                        borderColor: 'rgba(26, 115, 232, 1)',
                        pointBackgroundColor: 'rgba(26, 115, 232, 1)'
                    },
                    {
                        label: '节点2-us2',
                        data: [75, 85, 90, 80, 90],
                        backgroundColor: 'rgba(52, 168, 83, 0.2)',
                        borderColor: 'rgba(52, 168, 83, 1)',
                        pointBackgroundColor: 'rgba(52, 168, 83, 1)'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        pointLabels: {
                            color: '#9aa0a6'
                        },
                        ticks: {
                            display: false
                        }
                    }
                }
            }
        });
        
        // 威胁分布图表
        const threatCtx = document.getElementById('threatDistributionChart').getContext('2d');
        const threatDistributionChart = new Chart(threatCtx, {
            type: 'doughnut',
            data: {
                labels: ['已防护', '低风险', '中风险', '高风险'],
                datasets: [{
                    data: [75, 15, 8, 2],
                    backgroundColor: [
                        'rgba(52, 168, 83, 0.7)',
                        'rgba(26, 115, 232, 0.7)',
                        'rgba(251, 188, 5, 0.7)',
                        'rgba(234, 67, 53, 0.7)'
                    ],
                    borderColor: [
                        'rgba(52, 168, 83, 1)',
                        'rgba(26, 115, 232, 1)',
                        'rgba(251, 188, 5, 1)',
                        'rgba(234, 67, 53, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#9aa0a6',
                            padding: 15
                        }
                    }
                }
            }
        });
        
        // 流量分布图表
        const trafficCtx = document.getElementById('trafficDistributionChart').getContext('2d');
        const trafficDistributionChart = new Chart(trafficCtx, {
            type: 'pie',
            data: {
                labels: ['国内流量', '代理流量', '直连流量', '阻断流量'],
                datasets: [{
                    data: [45, 35, 18, 2],
                    backgroundColor: [
                        'rgba(26, 115, 232, 0.7)',
                        'rgba(52, 168, 83, 0.7)',
                        'rgba(251, 188, 5, 0.7)',
                        'rgba(234, 67, 53, 0.7)'
                    ],
                    borderColor: [
                        'rgba(26, 115, 232, 1)',
                        'rgba(52, 168, 83, 1)',
                        'rgba(251, 188, 5, 1)',
                        'rgba(234, 67, 53, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#9aa0a6',
                            padding: 15
                        }
                    }
                }
            }
        });
        
        // DNS延迟模拟
        let isMonitoring = true;
        let timeCounter = 0;
        const maxDataPoints = 20;
        
        // 初始延迟值
        let googleLatency = 58;
        let aliLatency = 32;
        let fakeipLatency = 12;
        
        // 更新延迟显示
        function updateLatencyDisplay() {
            document.getElementById('google-latency').textContent = googleLatency + 'ms';
            document.getElementById('ali-latency').textContent = aliLatency + 'ms';
            document.getElementById('fakeip-latency').textContent = fakeipLatency + 'ms';
        }
        
        // 模拟DNS延迟变化
        function simulateDNSLatency() {
            if (!isMonitoring) return;
            
            timeCounter++;
            
            // 生成随机变化
            const googleChange = Math.floor(Math.random() * 10) - 4;
            const aliChange = Math.floor(Math.random() * 8) - 3;
            const fakeipChange = Math.floor(Math.random() * 6) - 2;
            
            // 更新延迟值（确保在合理范围内）
            googleLatency = Math.max(10, Math.min(150, googleLatency + googleChange));
            aliLatency = Math.max(5, Math.min(100, aliLatency + aliChange));
            fakeipLatency = Math.max(2, Math.min(50, fakeipLatency + fakeipChange));
            
            // 更新趋势指示器
            document.getElementById('google-trend').className = googleChange >= 0 ? 'latency-trend trend-up' : 'latency-trend trend-down';
            document.getElementById('google-trend').innerHTML = googleChange >= 0 ? '<i class="fas fa-arrow-up"></i>' : '<i class="fas fa-arrow-down"></i>';
            
            document.getElementById('ali-trend').className = aliChange >= 0 ? 'latency-trend trend-up' : 'latency-trend trend-down';
            document.getElementById('ali-trend').innerHTML = aliChange >= 0 ? '<i class="fas fa-arrow-up"></i>' : '<i class="fas fa-arrow-down"></i>';
            
            document.getElementById('fakeip-trend').className = fakeipChange >= 0 ? 'latency-trend trend-up' : 'latency-trend trend-down';
            document.getElementById('fakeip-trend').innerHTML = fakeipChange >= 0 ? '<i class="fas fa-arrow-up"></i>' : '<i class="fas fa-arrow-down"></i>';
            
            // 更新显示
            updateLatencyDisplay();
            
            // 更新图表数据
            if (dnsData.labels.length >= maxDataPoints) {
                dnsData.labels.shift();
                dnsData.datasets[0].data.shift();
                dnsData.datasets[1].data.shift();
                dnsData.datasets[2].data.shift();
            }
            
            dnsData.labels.push(timeCounter + 's');
            dnsData.datasets[0].data.push(googleLatency);
            dnsData.datasets[1].data.push(aliLatency);
            dnsData.datasets[2].data.push(fakeipLatency);
            
            dnsLatencyChart.update();
        }
        
        // 控制按钮事件
        document.getElementById('pause-resume-btn').addEventListener('click', function() {
            isMonitoring = !isMonitoring;
            this.innerHTML = isMonitoring ? '<i class="fas fa-pause"></i> 暂停' : '<i class="fas fa-play"></i> 继续';
        });
        
        document.getElementById('reset-btn').addEventListener('click', function() {
            dnsData.labels = [];
            dnsData.datasets[0].data = [];
            dnsData.datasets[1].data = [];
            dnsData.datasets[2].data = [];
            timeCounter = 0;
            dnsLatencyChart.update();
        });
        
        // 开始模拟
        setInterval(simulateDNSLatency, 2000);
        
        // 初始显示
        updateLatencyDisplay();
        
        // 模拟其他数据更新
        setInterval(() => {
            // 模拟节点性能变化
            nodePerformanceChart.data.datasets[0].data = [
                Math.floor(Math.random() * 10) + 80,
                Math.floor(Math.random() * 10) + 85,
                Math.floor(Math.random() * 10) + 75,
                Math.floor(Math.random() * 10) + 70,
                Math.floor(Math.random() * 5) + 90
            ];
            nodePerformanceChart.data.datasets[1].data = [
                Math.floor(Math.random() * 10) + 70,
                Math.floor(Math.random() * 10) + 80,
                Math.floor(Math.random() * 10) + 85,
                Math.floor(Math.random() * 10) + 75,
                Math.floor(Math.random() * 5) + 85
            ];
            nodePerformanceChart.update();
        }, 5000);
    </script>
</body>
</html>
